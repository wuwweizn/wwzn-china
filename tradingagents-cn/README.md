# TradingAgents-CN Home Assistant 加载项使用说明

！！！！注意：此加载项对HA硬件要求 内存4GB+ RAM (推荐 8GB+)

## 🚀 快速开始

### 1. 访问应用

**方式一：直接访问**
```
http://您的Home Assistant IP地址:8501
```

**方式二：查看您的IP地址**
- 在 Home Assistant 中，进入 `设置` → `系统` → `网络`
- 查看您的IP地址，例如：`192.168.1.100`
- 然后访问：`http://192.168.1.100:8501`

**方式三：使用域名**
```
http://homeassistant.local:8501
```

### 2. 首次配置

#### 步骤1：获取API密钥

**阿里百炼API密钥 (推荐，国产大模型，中文优化)（必需）**
1. 访问 [阿里云百炼平台](https://dashscope.aliyun.com/)
2. 注册阿里云账号 -> 开通百炼服务 -> 获取API密钥
3. 格式: sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
4. 获取API Key

**Tushare API Token (A股必需推荐，专业的中国金融数据源)**
1. 获取地址: https://tushare.pro/register?reg=128886
2. 注册Tushare账号 -> 邮箱验证
3. 登录后进入个人中心 -> 获取Token
4.复制Token（格式：xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx）
# 注意：免费用户有调用频率限制，建议升级积分获得更高权限

**FinnHub API密钥（美股推荐 用于获取美股金融数据）**
1. 访问 [FinnHub](https://finnhub.io/)
2. 免费账户每分钟60次请求，足够日常使用
3. 获取API Key 格式: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx



**其他API密钥（可选）**
- Google AI API：用于Gemini模型
- OpenAI API：用于GPT模型
- Anthropic API：用于Claude模型

#### 步骤2：配置Home Assistant加载项
1. 在Home Assistant中，进入 `设置` → `加载项、备份与监控` → `加载项商店`
2. 找到并点击 `TradingAgents-CN` 加载项
3. 点击 `配置` 标签页
4. 填入获取的API密钥：
```yaml
dashscope_api_key: "您的阿里百炼API密钥（必须）"
tushare_token："您的Tushare API 密钥（必须）"
finnhub_api_key: "您的FinnHub API密钥（可选）"
google_api_key: "您的Google AI API密钥（可选）"
openai_api_key: "您的OpenAI API密钥（可选）"
anthropic_api_key: "您的Anthropic API密钥（可选）"
```
5. 点击 `保存`
6. 点击 `重新启动` 使配置生效

## 📊 使用教程

### 基础股票分析

#### 1. 访问界面
- 打开浏览器，访问 `http://您的IP:8501`
- 等待界面加载完成

#### 2. 输入股票代码
**A股示例：**
- `000001` - 平安银行
- `000002` - 万科A
- `600519` - 贵州茅台
- `600036` - 招商银行
- `300750` - 宁德时代

**美股示例：**
- `AAPL` - 苹果公司
- `TSLA` - 特斯拉
- `NVDA` - 英伟达
- `GOOGL` - 谷歌
- `MSFT` - 微软

#### 3. 选择分析配置

**研究深度级别：**
- `1级` - 快速分析 (2-4分钟) - 日常监控
- `2级` - 基础分析 (4-6分钟) - 常规投资
- `3级` - 标准分析 (6-10分钟) - 重要决策 **[推荐]**
- `4级` - 深度分析 (10-15分钟) - 重大投资
- `5级` - 全面分析 (15-25分钟) - 最重要决策

**智能体选择：**
- ✅ **基本面分析师** - 分析财务数据、业绩指标
- ✅ **技术分析师** - 分析价格走势、技术指标
- ✅ **新闻分析师** - 分析相关新闻、市场情绪
- ✅ **社交媒体分析师** - 分析社交媒体情绪

#### 4. 启动分析
1. 点击 `开始分析` 按钮
2. 等待分析完成（可实时查看进度）
3. 查看详细分析结果

### 分析结果解读

#### 投资建议
- **买入 (BUY)** - 积极看好，建议购买
- **持有 (HOLD)** - 保持现状，观望态度
- **卖出 (SELL)** - 建议出售，规避风险

#### 关键指标
- **置信度** - AI分析的可信程度 (0-100%)
- **风险评分** - 投资风险等级 (低/中/高)
- **目标价位** - 预期股价目标
- **时间框架** - 预期时间范围

#### 详细报告
- **执行摘要** - 核心投资建议
- **分析师观点** - 各专业分析师的详细观点
- **风险评估** - 潜在风险和机会
- **推理过程** - AI的决策逻辑

## ⚙️ 高级配置

### 数据库优化（可选）

如需提升性能，可以配置数据库支持：

```yaml
mongodb_enabled: true
redis_enabled: true
mongodb_host: "您的MongoDB主机"
mongodb_port: 27017
redis_host: "您的Redis主机"
redis_port: 6379
```

### 成本控制

**经济模式配置：**
- 主要使用阿里百炼模型（成本较低）
- 选择较低的研究深度
- 减少并发分析师数量

**标准模式配置：**
- 混合使用多种模型
- 标准研究深度（3级）
- 全部分析师参与

**高精度模式配置：**
- 使用最先进的模型
- 最高研究深度（4-5级）
- 启用所有高级功能

## 🔧 故障排除

### 常见问题

#### 1. 无法访问Web界面
**解决方案：**
- 确认加载项已启动（状态为"运行中"）
- 检查IP地址是否正确
- 尝试使用不同的浏览器
- 清除浏览器缓存

#### 2. API密钥错误
**错误信息：** `API authentication failed`
**解决方案：**
- 检查API密钥是否正确复制
- 确认API密钥未过期
- 检查API配额是否用完

#### 3. 股票代码无法识别
**解决方案：**
- A股使用6位数字代码
- 美股使用字母代码
- 确认股票代码拼写正确

#### 4. 分析速度慢
**解决方案：**
- 降低研究深度级别
- 减少同时分析的智能体数量
- 检查网络连接状况

#### 5. 内存不足
**解决方案：**
- 重启加载项
- 降低研究深度
- 关闭其他占用内存的加载项

### 查看日志
1. 在Home Assistant中进入TradingAgents-CN加载项
2. 点击 `日志` 标签页
3. 查看详细错误信息

## 📈 最佳实践

### 投资分析建议

#### 1. 分析策略
- **日常监控**：使用1-2级快速分析
- **投资决策**：使用3-4级标准/深度分析
- **重大投资**：使用5级全面分析

#### 2. 多维度验证
- 同时分析相关股票
- 对比不同时期的分析结果
- 结合外部信息进行验证

#### 3. 风险管控
- 关注风险评分和置信度
- 不要完全依赖AI建议
- 考虑个人风险承受能力

### 系统优化建议

#### 1. 定期维护
- 每周重启一次加载项
- 定期检查API密钥状态
- 更新到最新版本

#### 2. 数据管理
- 启用数据库缓存提升性能
- 定期清理历史数据
- 备份重要分析结果

## 📞 支持与反馈

### 获取帮助
- **GitHub Issues**：[提交问题](https://github.com/wuwweizn/wwzn-china/issues)
- **原项目文档**：[TradingAgents-CN](https://github.com/hsliuping/TradingAgents-CN)

### 版本更新
- 关注GitHub仓库获取最新版本
- 查看CHANGELOG了解更新内容
- 及时更新以获得最新功能和修复

## ⚠️ 重要声明

**投资风险提示：**
- 本工具仅用于研究和参考目的
- 不构成具体投资建议
- 投资有风险，决策需谨慎
- 建议咨询专业财务顾问

**技术限制：**
- AI分析存在不确定性
- 市场情况瞬息万变
- 历史数据不代表未来表现

---

🎉 **现在您可以开始使用TradingAgents-CN进行智能投资分析了！**

记住：理性投资，风险自控，AI辅助决策而非替代决策。